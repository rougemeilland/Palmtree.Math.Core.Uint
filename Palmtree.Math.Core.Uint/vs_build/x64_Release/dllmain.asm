; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27026.1 

include listing.inc

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	DllMain
EXTRN	AllocateHeapArea:PROC
EXTRN	DeallocateHeapArea:PROC
;	COMDAT pdata
pdata	SEGMENT
$pdata$DllMain DD imagerel $LN15
	DD	imagerel $LN15+59
	DD	imagerel $unwind$DllMain
pdata	ENDS
;	COMDAT xdata
xdata	SEGMENT
$unwind$DllMain DD 010401H
	DD	04204H
xdata	ENDS
; Function compile flags: /Ogtpy
; File z:\sources\lunor\repos\rougemeilland\palmtree.math.core.uint\palmtree.math.core.uint\dllmain.c
;	COMDAT DllMain
_TEXT	SEGMENT
hinstDLL$ = 48
dwReason$ = 56
lpvReserved$ = 64
DllMain	PROC						; COMDAT

; 42   : {

$LN15:
	sub	rsp, 40					; 00000028H

; 43   : 	BOOL result = TRUE;
; 44   : 	switch (dwReason)

	test	edx, edx
	je	SHORT $LN8@DllMain
	sub	edx, 1
	je	SHORT $LN4@DllMain
	sub	edx, 1
	je	SHORT $LN13@DllMain
	cmp	edx, 1
	je	SHORT $LN13@DllMain

; 59   :             break;
; 60   :         default:
; 61   :             result = FALSE;
; 62   :             break;
; 63   : 	}
; 64   : 	return (result);

	xor	eax, eax

; 65   : }

	add	rsp, 40					; 00000028H
	ret	0
$LN4@DllMain:

; 45   : 	{
; 46   :         case DLL_PROCESS_ATTACH: // DLLがプロセスのアドレス空間にマッピングされた。
; 47   :             if (!AllocateHeapArea())

	call	AllocateHeapArea
	test	eax, eax
	jne	SHORT $LN13@DllMain

; 65   : }

	add	rsp, 40					; 00000028H
	ret	0
$LN8@DllMain:

; 48   :                 result = FALSE;
; 49   :             break;
; 50   : 
; 51   :         case DLL_THREAD_ATTACH: // スレッドが作成されようとしている。
; 52   :             break;
; 53   : 
; 54   :         case DLL_THREAD_DETACH: // スレッドが破棄されようとしている。
; 55   :             break;
; 56   : 
; 57   :         case DLL_PROCESS_DETACH: // DLLのマッピングが解除されようとしている。
; 58   :             DeallocateHeapArea();

	call	DeallocateHeapArea
$LN13@DllMain:

; 65   : }

	mov	eax, 1
	add	rsp, 40					; 00000028H
	ret	0
DllMain	ENDP
_TEXT	ENDS
END
